Microsoft (R) Macro Assembler Version 6.11a		    03/07/09 22:34:59
Exodus							     Page 1 - 1


				; exodus.asm
				;
				; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
				; ³ Exodus Top-Level Program ³
				; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
				;
				; Exodus Top-Level Program.  From here all things are done
				;
				;

				TITLE Exodus

				    .MODEL tiny

				    .STACK 0h

				INCLUDE \exodus\source\common\equates.asp
			      C ; equates.asp
			      C ;
			      C ; Exodus constants.  These are used at various places.
			      C ; This file provides a common area to modify constant values, rather than sifting through programs, etc.
			      C ;
			      C 
			      C 
			      C 
			      C INCLUDE x86_eq.asp
			      C ; x86_eq.asp
			      C ;
			      C ; Constants specific to the Intel architecture
			      C ;
			      C 
			      C 
			      C 
 = 0000			      C _TSS_BACK_LINK              EQU 0
 = 0004			      C _TSS_ESP0                   EQU 4
 = 0008			      C _TSS_SS0                    EQU 8
 = 000C			      C _TSS_ESP1                   EQU 12
 = 0010			      C _TSS_SS1                    EQU 16
 = 0014			      C _TSS_ESP2                   EQU 20
 = 0018			      C _TSS_SS2                    EQU 24
 = 001C			      C _TSS_CR3                    EQU 28
 = 0020			      C _TSS_EIP                    EQU 32
 = 0024			      C _TSS_EFLAGS                 EQU 36
 = 0028			      C _TSS_EAX                    EQU 40
 = 002C			      C _TSS_ECX                    EQU 44
 = 0030			      C _TSS_EDX                    EQU 48
 = 0034			      C _TSS_EBX                    EQU 52
 = 0038			      C _TSS_ESP                    EQU 56
 = 003C			      C _TSS_EBP                    EQU 60
 = 0040			      C _TSS_ESI                    EQU 64
 = 0044			      C _TSS_EDI                    EQU 68
 = 0048			      C _TSS_ES                     EQU 72
 = 004C			      C _TSS_CS                     EQU 76
 = 0050			      C _TSS_SS                     EQU 80
 = 0054			      C _TSS_DS                     EQU 84
 = 0058			      C _TSS_FS                     EQU 88
 = 005C			      C _TSS_GS                     EQU 92
 = 0060			      C _TSS_LDT                    EQU 96
 = 0064			      C _TSS_TRAP_BIT               EQU 100
 = 0001			      C _TSS_TRAP_BIT_MASK          EQU 1b
 = 0066			      C _TSS_IO_MAP                 EQU 102
			      C ; The following area is used by Exodus.  It appears immediate after the TSS in memory
 = 0068			      C _TSS_FPU_SAVE_AREA          EQU 104
			      C 
			      C 
			      C ; EFLAGS register constants to access individual flags
 = 0000			      C _EFLAGS_CF                  EQU 0
 = 0002			      C _EFLAGS_PF                  EQU 2
 = 0004			      C _EFLAGS_ACF                 EQU 4
 = 0006			      C _EFLAGS_ZF                  EQU 6
 = 0007			      C _EFLAGS_SF                  EQU 7
 = 0008			      C _EFLAGS_TF                  EQU 8
 = 0009			      C _EFLAGS_IF                  EQU 9
 = 000A			      C _EFLAGS_DF                  EQU 10
 = 000B			      C _EFLAGS_OF                  EQU 11
 = 000C			      C _EFLAGS_IOPL                EQU 12
 = 000E			      C _EFLAGS_NT                  EQU 14
 = 0010			      C _EFLAGS_RF                  EQU 16
 = 0011			      C _EFLAGS_VM                  EQU 17
			      C ; Masks to access specific bits
 = 0001			      C _EFLAGS_CF_MASK             EQU  1b SHL _EFLAGS_CF
 = 0004			      C _EFLAGS_PF_MASK             EQU  1b SHL _EFLAGS_PF
 = 0010			      C _EFLAGS_ACF_MASK            EQU  1b SHL _EFLAGS_ACF
 = 0040			      C _EFLAGS_ZF_MASK             EQU  1b SHL _EFLAGS_ZF
 = 0080			      C _EFLAGS_SF_MASK             EQU  1b SHL _EFLAGS_SF
 = 0100			      C _EFLAGS_TF_MASK             EQU  1b SHL _EFLAGS_TF
 = 0200			      C _EFLAGS_IF_MASK             EQU  1b SHL _EFLAGS_IF
 = 0400			      C _EFLAGS_DF_MASK             EQU  1b SHL _EFLAGS_DF
 = 0800			      C _EFLAGS_OF_MASK             EQU  1b SHL _EFLAGS_OF
 = 3000			      C _EFLAGS_IOPL_MASK           EQU 11b SHL _EFLAGS_IOPL
 = 4000			      C _EFLAGS_NT_MASK             EQU  1b SHL _EFLAGS_NT
 = 00010000		      C _EFLAGS_RF_MASK             EQU  1b SHL _EFLAGS_RF
 = 00020000		      C _EFLAGS_VM_MASK             EQU  1b SHL _EFLAGS_VM
			      C 
 = 1000			      C _CW_INFINITY                EQU 1000000000000b
 = 0C00			      C _CW_ROUNDING                EQU  110000000000b
 = 0000			      C _CW_ROUNDING_00             EQU  000000000000b
 = 0400			      C _CW_ROUNDING_01             EQU  010000000000b
 = 0800			      C _CW_ROUNDING_10             EQU  100000000000b
 = 0C00			      C _CW_ROUNDING_11             EQU  110000000000b
 = 0300			      C _CW_PRECISION               EQU    1100000000b
 = 0000			      C _CW_PRECISION_00            EQU    0000000000b
 = 0100			      C _CW_PRECISION_01            EQU    0100000000b
 = 0200			      C _CW_PRECISION_10            EQU    1000000000b
 = 0300			      C _CW_PRECISION_11            EQU    1100000000b
 = 0020			      C _CW_PM                      EQU        100000b
 = 0010			      C _CW_UM                      EQU         10000b
 = 0008			      C _CW_OM                      EQU          1000b
 = 0004			      C _CW_ZM                      EQU           100b
 = 0002			      C _CW_DM                      EQU            10b
 = 0001			      C _CW_IM                      EQU             1b
			      C 
 = 8000			      C _SW_BUSY                    EQU 1000000000000000b
 = 4000			      C _SW_C3                      EQU  100000000000000b
 = 3800			      C _SW_TOS                     EQU   11100000000000b
 = 0400			      C _SW_C2                      EQU      10000000000b
 = 0200			      C _SW_C1                      EQU       1000000000b
 = 0100			      C _SW_C0                      EQU        100000000b
 = 0080			      C _SW_ERROR_SUMMARY           EQU         10000000b
 = 0040			      C _SW_STACK_FAULT             EQU          1000000b
 = 0020			      C _SW_PE                      EQU           100000b
 = 0010			      C _SW_UE                      EQU            10000b
 = 0008			      C _SW_OE                      EQU             1000b
 = 0004			      C _SW_ZE                      EQU              100b
 = 0002			      C _SW_DE                      EQU               10b
 = 0001			      C _SW_IE                      EQU                1b
			      C 
			      C 
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ GDT ENTRIES ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 0008			      C     _sIDT                       EQU 1 * 8       ; IDT
 = 0010			      C     _sGDT                       EQU 2 * 8       ; GDT
 = 0018			      C     _sSTACK                     EQU 3 * 8       ; STACK
 = 0020			      C     _sCODE                      EQU 4 * 8       ; kernel CODE for kernel code
 = 0048			      C     _sDATA                      EQU 9 * 8       ; kernel DATA selector for kernel data
 = 0028			      C     _sGRAPHICS                  EQU 5 * 8       ; Graphics video (0a0000h)
 = 0030			      C     _sMONO                      EQU 6 * 8       ; Mono video (0b0000h)
 = 0038			      C     _sVGA                       EQU 7 * 8       ; VGA video (0b8000h)
 = 0040			      C     _sALL_MEM                   EQU 8 * 8       ; All memory (for debugging)
			      C     ; 9 is above, _sDATA
 = 0050			      C     _sEXODUS_MEM                EQU 10 * 8      ; Exodus assigned memory
 = 0058			      C     _sEXODUS_PORTS              EQU 11 * 8      ; Exodus assigned ports
 = 0060			      C     _sEXODUS_INTS               EQU 12 * 8      ; Exodus assigned ints
			      C     ;_sNOT_USED                                 ; available
 = 0070			      C     _sEXODUS_TSS                EQU 14 * 8      ; Exodus TSS
 = 0078			      C     _sEXODUS_TASK_GATE          EQU 15 * 8      ; Exodus kernel task gate (points to _sEXODUS_TSS)
 = 0080			      C     _sEXODUS_SLAVE_TSS          EQU 16 * 8      ; Exodus Slave TSS
 = 0088			      C     _sEXODUS_SLAVE_TASK_GATE    EQU 17 * 8      ; Exodus kernel slave task gate (points to _sEXODUS_SLAVE_TSS)
			      C     ;_sNOT USED
 = 0098			      C     _sPRIMATIVES                EQU 19 * 8      ; Primative structure for natives
 = 00A0			      C     _sPRIMATIVE_LOAD_INFO       EQU 20 * 8      ; Primative load information (for reporting on each driver)
 = 00A8			      C     _sSYSTEM                    EQU 21 * 8      ; Exodus system memory
 = 00B0			      C     _sEXODUS_REQUESTOR          EQU 22 * 8      ; Call gate to Exodus's requestor() function
 = 00B8			      C     _sSYSTEM_RING1              EQU 23 * 8      ; Exodus system memory for ring-1 apps
 = 00C0			      C     _sSYSTEM_RING2              EQU 24 * 8      ; Exodus system memory for ring-2 apps
 = 00C8			      C     _sSYSTEM_RING3              EQU 25 * 8      ; Exodus system memory for ring-3 apps
 = 00D0			      C     _sDEBI_screen               EQU 26 * 8      ; low-level DEBI debugger's save screen buffer
 = 00D8			      C     _sDEBI_memory               EQU 27 * 8      ; low-level DEBI debugger's memory
 = 00E0			      C     _sFLOPPY_TRACK              EQU 28 * 8      ; Floppy disk data I/O for one full track
 = 00E8			      C     _sVGA_BACKUP                EQU 29 * 8      ; VGA video (060000h, used when in a graphics mode so writes
			      C                                                 ;  to the text screen are still valid)
 = 00F0			      C     _sDEBI_screen2              EQU 30 * 8      ; low-level DEBI debugger's save screen buffer2 (for popups and menus)
 = 00F8			      C     _sDEBI_temp                 EQU 31 * 8      ; low-level DEBI debugger's temporary selector (used for various things)
 = 0100			      C     _sEXODUS_OBJECTS            EQU 32 * 8      ; Exodus objects
 = 0108			      C     _sTASK_SWITCH_TSS           EQU 33 * 8      ; Task Manager's switch_task() function
 = 0110			      C     _sTASK_SWITCH_TASK_GATE     EQU 34 * 8      ; Task Manager's task gate (points to _sTASK_SWITCH_TSS)
 = 0118			      C     _sTASK_STACK                EQU 35 * 8      ; Task Manger task's stack
 = 0120			      C     _sSTACK0                    EQU 36 * 8      ; Exodus Stack 0
 = 0128			      C     _sSTACK1                    EQU 37 * 8      ; Exodus Stack 1
 = 0130			      C     _sSTACK2                    EQU 38 * 8      ; Exodus Stack 2
 = 0138			      C     _sDEBI_dt                   EQU 39 * 8      ; low-level DEBI debugger's DT storage
 = 0140			      C     _sDEBI_np                   EQU 40 * 8      ; low-level DEBI debugger's NP storage
 = 0148			      C     _sDEBI_rp                   EQU 41 * 8      ; low-level DEBI debugger's RP storage
			      C 
			      C   ; Variable base/limit GDT slots setup in INIT32.ASP
 = 0190			      C     _sEXODUS_INI                EQU 50 * 8      ; Holds the parsed EXODUS.INI sructure
 = 0198			      C     _sEXODUS_INI_ERRORS         EQU 51 * 8      ; Holds any errors found while parsing EXODUS.INI
 = 01A0			      C     _sTASK_SYSTEM               EQU 52 * 8      ; Holds all tasks
			      C 
 = 5DA0			      C     _cgTEMP_PRIMATIVE_MAIN      EQU 2996 * 8
 = 5DA8			      C     _cgTEMP_PRIMATIVE_REQUESTOR EQU 2997 * 8
 = 5DB0			      C     _csTEMP_PRIMATIVE           EQU 2998 * 8
 = 5DB8			      C     _dsTEMP_PRIMATIVE           EQU 2999 * 8
			      C 
			      C 
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ CONSTANTS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÙ
 = 00C8			      C     _MIN_PRIMATIVE              EQU 200                             ; Start of the primatives
 = 0BB3			      C     _MAX_PRIMATIVE              EQU 2995                            ; End of the primatives
 = 0FFF			      C     _lastGDT                    EQU 4095                            ; Last valid GDT in the GDT
 = 0032			      C     _firstASSIGNMENT            EQU 50                              ; The first Exodus assigned GDT entry for various items
 = 00C7			      C     _lastASSIGNMENT             EQU 199                             ; The last Exodus assigned GDT entry for various items
 = 0BB8			      C     _firstUSER_ASSIGNMENT       EQU 3000
 = 0FFF			      C     _lastUSER_ASSIGNMENT        EQU 4095
 = 00C7			      C     _sGDT_init                  EQU 199                             ; Only initialize the first 199 GDT entries
			      C 
			      C 
			      C   ; Required memory structures for Exodus
			      C   ; Refer to Bootup(internal) document for definitive memory locations
 = 0008A000		      C     _sIDT_base                  EQU 8a000h
 = 0800			      C     _sIDT_limit                 EQU 800h
 = 0800			      C     _sGDT_base                  EQU 0800h
 = 8000			      C     _sGDT_limit                 EQU 8000h
 = 00098000		      C     _sSTACK_base                EQU 98000h
 = 8000			      C     _sSTACK_limit               EQU 8000h
 = 00010000		      C     _sCODE_base                 EQU 10000h
 = 00040000		      C     _sCODE_limit                EQU 40000h
 = 00010000		      C     _sDATA_base                 EQU 10000h
 = 00030000		      C     _sDATA_limit                EQU 30000h
 = 000A0000		      C     _sGRAPHICS_base             EQU 0a0000h
 = 00010000		      C     _sGRAPHICS_limit            EQU 10000h
 = 000B0000		      C     _sMONO_base                 EQU 0b0000h
 = 8000			      C     _sMONO_limit                EQU 8000h
 = 000B8000		      C     _sVGA_base                  EQU 0b8000h     ; Also, see _sVGA_BACKUP_ below
 = 8000			      C     _sVGA_limit                 EQU 8000h
 = 0000			      C     _sALL_MEM_base              EQU 0
 = FFFFFFFF		      C     _sALL_MEM_limit             EQU 0ffffffffh
 = 00070C00		      C     _sEXODUS_MEM_base           EQU 70c00h
 = 4000			      C     _sEXODUS_MEM_limit          EQU 4000h
 = 0006CC00		      C     _sEXODUS_PORTS_base         EQU 6cc00h
 = 4000			      C     _sEXODUS_PORTS_limit        EQU 4000h
 = 00097E00		      C     _sEXODUS_INTS_base          EQU 97e00h
 = 0200			      C     _sEXODUS_INTS_limit         EQU 200h
 = 00068100		      C     _sEXODUS_TSS_base           EQU 68100h
 = 0100			      C     _sEXODUS_TSS_limit          EQU 100h        ; 256 bytes
			      C    ;_sEXODUS_TASK_GATE          EQU task gate pointing to _sEXODUS_TSS
 = 00068200		      C     _sEXODUS_SLAVE_TSS_base     EQU 68200h
 = 0100			      C     _sEXODUS_SLAVE_TSS_limit    EQU 100h        ; 256 bytes
 = 0008D380		      C     _sPRIMATIVES_base           EQU 8d380h
 = 4000			      C     _sPRIMATIVES_limit          EQU 4000h       ; 16k
 = 0008C380		      C     _sPRIMATIVE_LOAD_INFO_base  EQU 8c380h
 = 1000			      C     _sPRIMATIVE_LOAD_INFO_limit EQU 1000h       ; 4k
 = 00089400		      C     _sSYSTEM_base               EQU 89400h
 = 0C00			      C     _sSYSTEM_limit              EQU 0c00h       ; 3k
 = 0800			      C     _sSYSTEM_USER_limit         EQU 0800h       ; 2k
 = 00281400		      C     _sDEBI_screen_base          EQU 281400h                         ; ; ; ; ; Added 2 MB, 02/26/2009 - RCH
 = 8000			      C     _sDEBI_screen_limit         EQU 8000h       ; 32k
 = 00279400		      C     _sDEBI_memory_base          EQU 279400h                         ; ; ; ; ; Added 2 MB, 02/26/2009 - RCH
 = 8000			      C     _sDEBI_memory_limit         EQU 8000h       ; 32k
 = 00074C00		      C     _sFLOPPY_TRACK_base         EQU 74c00h
 = 4800			      C     _sFLOPPY_TRACK_limit        EQU 4800h       ; 512 bytes per sector * 18 sectors * 2 sides = 18k
 = 00060000		      C     _sVGA_BACKUP_base           EQU 60000h      ; Note, the backup area is used when in graphics modes that use a0000h
 = 8000			      C     _sVGA_BACKUP_limit          EQU 8000h       ; so all video writes to the text window are still saved
 = 00258000		      C     _sDEBI_screen2_base         EQU 258000h
 = 00028000		      C     _sDEBI_screen2_limit        EQU 28000h       ; 32k
 = 00068000		      C     _sTASK_SWITCH_TSS_base      EQU 68000h
 = 0100			      C     _sTASK_SWITCH_TSS_limit     EQU 100h        ; 256 bytes
 = 00220000		      C     _sTASK_STACK_base           EQU 220000h                         ; ; ; ; ; Added 1 MB, 03/01/2009 - RCH
 = 8000			      C     _sTASK_STACK_limit          EQU 8000h       ; 32k
 = 00095380		      C     _sSTACK0_base               EQU 95380h
 = 2000			      C     _sSTACK0_limit              EQU 2000h       ; 8k
 = 00093380		      C     _sSTACK1_base               EQU 93380h
 = 2000			      C     _sSTACK1_limit              EQU 2000h       ; 8k
 = 00091380		      C     _sSTACK2_base               EQU 91380h
 = 2000			      C     _sSTACK2_limit              EQU 2000h       ; 8k
 = 00240000		      C     _sDEBI_dt_base              EQU 240000h                         ; ; ; ; ; Added 1 MB, 03/01/2009 - RCH
 = 8000			      C     _sDEBI_dt_limit             EQU 8000h       ; 32k
 = 00248000		      C     _sDEBI_np_base              EQU 248000h                         ; ; ; ; ; Added 1 MB, 03/01/2009 - RCH
 = 8000			      C     _sDEBI_np_limit             EQU 8000h       ; 32k
 = 00250000		      C     _sDEBI_rp_base              EQU 250000h                         ; ; ; ; ; Added 1 MB, 03/01/2009 - RCH
 = 8000			      C     _sDEBI_rp_limit             EQU 8000h       ; 32k
			      C 
 = 00050000		      C     _sEXODUS_OBJECTS_base       EQU 50000h
 = 8000			      C     _sEXODUS_OBJECTS_limit      EQU 8000h       ; 32k
 = 00200000		      C     _sEXODUS_INI_base           EQU 200000h     ; 1MB               ; ; ; ; ; Added 1 MB, 03/01/2009 - RCH
 = 00010000		      C     _sEXODUS_INI_limit          EQU 10000h      ; 64k
 = 00210000		      C     _sEXODUS_INI_ERRORS_base    EQU 210000h     ; 1MB + 64k         ; ; ; ; ; Added 1 MB, 03/01/2009 - RCH
 = 4000			      C     _sEXODUS_INI_ERRORS_limit   EQU 4000h       ; 16k
 = 00210000		      C     _sTASK_SYSTEM_base          EQU 210000h     ; 1MB + 64k         ; ; ; ; ; Added 1 MB, 03/01/2009 - RCH
 = 00010000		      C     _sTASK_SYSTEM_limit         EQU 010000h     ; 64k
			      C 
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ BOOT DT STRUCTURE ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 0000			      C     _BOOT_DT_object_type        EQU 0
 = 0001			      C     _BOOT_DT_days               EQU 1
 = 0005			      C     _BOOT_DT_seconds            EQU 5
 = 0008			      C     _BOOT_DT_rp_offset          EQU 8
 = 000A			      C     _BOOT_DT_entry_type         EQU 10
 = 000B			      C     _BOOT_DT_np_offset          EQU 11
			      C 
			      C 
			      C 
			      C 
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ BOOT PARAMETER BLOCK STRUCTURE ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 0000			      C     _BOOT_PB_size               EQU 0
 = 0004			      C     _BOOT_PB_main               EQU 4
 = 0008			      C     _BOOT_PB_requestor          EQU 8
 = 000C			      C     _BOOT_PB_start_head         EQU 12
 = 000D			      C     _BOOT_PB_start_track        EQU 13
 = 000E			      C     _BOOT_PB_start_sector       EQU 14
 = 0010			      C     _BOOT_PB_end_head           EQU 16
 = 0011			      C     _BOOT_PB_end_track          EQU 17
 = 0012			      C     _BOOT_PB_end_sector         EQU 18
 = 0014			      C     _BOOT_PB_entry_type         EQU 20
 = 0016			      C     _BOOT_PB_linear_offset      EQU 22
 = 001A			      C     _BOOT_PB_dt_offset          EQU 26
 = 001C			      C     _BOOT_PB_crc16              EQU 28
 = 0020			      C     _BOOT_PB_structure_size     EQU 32
			      C 
			      C 
			      C 
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ EXODUS.INI STRUCTURES ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 0000			      C     _EXODUS_INI_FIRST_BRACKET       EQU 0
 = 0004			      C     _EXODUS_INI_TOTAL_BYTES         EQU 4
 = 0008			      C     _EXODUS_INI_TOTAL_BRACKET_GROUPS EQU 8
 = 000C			      C     _EXODUS_INI_TOTAL_PAREN_CASKS   EQU 12
 = 0010			      C     _EXODUS_INI_HEADER_LENGTH       EQU 16
			      C 
 = 0000			      C     _EXODUS_BRACKET_NEXT            EQU 0
 = 0004			      C     _EXODUS_BRACKET_PAREN_CASKS     EQU 4
 = 0008			      C     _EXODUS_BRACKET_TOTAL_PARENS    EQU 8
 = 000C			      C     _EXODUS_BRACKET_NAME            EQU 12
 = 0010			      C     _EXODUS_BRACKET_HANDLE          EQU 16
 = 0014			      C     _EXODUS_BRACKET_REQUESTOR       EQU 20
 = 0016			      C     _EXODUS_BRACKET_REQUESTOR_FUNC  EQU 22
 = 001A			      C     _EXODUS_BRACKET_SCRATCH_AREA    EQU 26
 = 001E			      C     _EXODUS_BRACKET_LENGTH          EQU 30
			      C 
 = 0000			      C     _EXODUS_PAREN_NEXT              EQU 0
 = 0004			      C     _EXODUS_PAREN_NEXT_SAME_LINE    EQU 4
 = 0008			      C     _EXODUS_PAREN_DATA_ITEMS        EQU 8
 = 000C			      C     _EXODUS_PAREN_TOTAL_DATA_ITEMS  EQU 12
 = 0010			      C     _EXODUS_PAREN_SOURCE_LINE       EQU 16
 = 0014			      C     _EXODUS_PAREN_SOURCE_LINE_LENGTH EQU 20
 = 0018			      C     _EXODUS_PAREN_HANDLE            EQU 24
 = 001A			      C     _EXODUS_PAREN_REQUESTOR         EQU 26
 = 001E			      C     _EXODUS_PAREN_REQUESTOR_FUNC    EQU 30
 = 0022			      C     _EXODUS_PAREN_SCRATCH_AREA      EQU 34
 = 0026			      C     _EXODUS_PAREN_LENGTH            EQU 38
			      C 
 = 0000			      C     _EXODUS_DATA_NEXT               EQU 0
 = 0004			      C     _EXODUS_DATA_DATA_ITEM_SOURCE   EQU 4
 = 0008			      C     _EXODUS_DATA_DATA_ITEM_LENGTH   EQU 8
 = 000C			      C     _EXODUS_DATA_LENGTH             EQU 12
			      C 
			      C 
			      C 
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ EXODUS xxx STRUCTURES ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 0000			      C     _EXODUS_MEM_type                EQU 0
 = 0004			      C     _EXODUS_MEM_base                EQU 4
 = 0008			      C     _EXODUS_MEM_limit               EQU 8
 = 000C			      C     _EXODUS_MEM_gdt                 EQU 12
 = 000E			      C     _EXODUS_MEM_ldt                 EQU 14
 = 0010			      C     _EXODUS_MEM_size                EQU 16
			      C 
 = 0010			      C     _EXODUS_PORTS_size              EQU 16
			      C 
 = 0002			      C     _EXODUS_INTS_size               EQU 2
			      C 
			      C 
			      C 
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ EXODUS SYSTEM MEMORY ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
			      C ; Note, when updates are made here they need to be reflected in INF\SYSTEM.INF
			      C ; Note, when updates are made here and INF\SYSTEM.INF, the "Exodus Quick Reference" manual needs to be updated
 = 0000			      C     _SYSTEM_SECONDS_SINCE_BOOTUP    EQU 0                           ; dword
 = 0004			      C     _SYSTEM_SECONDS_SINCE_MIDNIGHT  EQU 4                           ; dword
 = 0008			      C     _SYSTEM_HOURS                   EQU 8                           ; byte
 = 0009			      C     _SYSTEM_MINUTES                 EQU 9                           ; byte
 = 000A			      C     _SYSTEM_SECONDS                 EQU 10                          ; byte
 = 000B			      C     _SYSTEM_182S_OF_A_SECOND        EQU 11                          ; byte
 = 000C			      C     _SYSTEM_DAY                     EQU 12                          ; byte
 = 000D			      C     _SYSTEM_MONTH                   EQU 13                          ; byte
 = 000E			      C     _SYSTEM_YEAR                    EQU 14                          ; word
 = 0010			      C     _SYSTEM_DAY_OF_YEAR             EQU 16                          ; word
 = 0012			      C     _SYSTEM_BUILD                   EQU 18                          ; 10-byte string in the format: "mm.dd.yyyy"
 = 001C			      C     _SYSTEM_TOTAL_MEMORY            EQU 28                          ; dword, total ram in bytes
 = 0020			      C     _SYSTEM_VGA_HORIZONTAL          EQU 32                          ; word (pixels-graphics, or columns-text)
 = 0022			      C     _SYSTEM_VGA_VERTICAL            EQU 34                          ; word (pixels-graphics, or rows-text)
 = 0024			      C     _SYSTEM_VGA_VIDEO_MODE          EQU 36                          ; byte (0-graphics, 1-text)
 = 0025			      C     _SYSTEM_MONO_VIDEO_MODE         EQU 37                          ; byte (0-graphics, 1-text, 0ffh-Unknown)
			      C 
			      C   ; Non-user accessible system memory areas (Exodus internal, hence the use of the _i_)
 = 0800			      C     _SYSTEM_i_FATAL                 EQU 2048                        ; dword
 = 0804			      C     _SYSTEM_i_TASKS_CREATED         EQU 2052                        ; dword
 = 0808			      C     _SYSTEM_i_TASKS_BY_USER         EQU 2056                        ; dword
 = 080C			      C     _SYSTEM_i_TASKS_BY_ERROR        EQU 2060                        ; dword
 = 0810			      C     _SYSTEM_i_IRQ6_INDICATOR        EQU 2064                        ; byte, IRQ6 indicator (changes each time an IRQ6 is signaled)
 = 0811			      C     _SYSTEM_i_IRQ6_INDICATOR_LAST   EQU 2065                        ; byte, IRQ6 indicator previous, used to see when an IRQ6 is signaled
 = 0812			      C     _SYSTEM_i_BASE                  EQU 2066                        ; dword
 = 0816			      C     _SYSTEM_i_LIMIT                 EQU 2070                        ; dword
 = 081A			      C     _SYSTEM_i_DWORD_TO_COPY         EQU 2074                        ; word
 = 081C			      C     _SYSTEM_i_LAST_GDT_REFERENCED   EQU 2076                        ; qword
 = 0824			      C     _SYSTEM_i_CODE_GDT_OFFSET       EQU 2084                        ; dword (used temporarily during native primative install)
 = 0828			      C     _SYSTEM_i_DATA_GDT_OFFSET       EQU 2088                        ; dword (used temporarily during native primative install)
 = 082C			      C     _SYSTEM_i_MAIN_GDT_OFFSET       EQU 2092                        ; dword (used temporarily during native primative install)
 = 0830			      C     _SYSTEM_i_REQUESTOR_GDT_OFFSET  EQU 2096                        ; dword (used temporarily during native primative install)
 = 0834			      C     _SYSTEM_i_GDT_TO_ASSIGN         EQU 2100                        ; word (used various places to assign GDT entries)
 = 0836			      C     _SYSTEM_i_USER_GDT_TO_ASSIGN    EQU 2102                        ; word (used various places to assign USER Program GDTs)
			      C   ; Next offset is 2104
			      C 
			      C 
			      C   ; These scratch items exist from end of memory down
 = 0BF8			      C     _SYSTEM_i_SCRATCH_DWORD2        EQU 3064                        ; dword (used various places as a scratch buffer)
 = 0BFC			      C     _SYSTEM_i_SCRATCH_DWORD1        EQU 3068                        ; dword (used various places as a scratch buffer)
			      C 
			      C 
			      C 
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ BOCHS SUPPORT ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
			      C ; These equates are used to communicate via INT 0FFh
			      C ; Values here are in ecx, with edx being used for data information.
			      C ; Values in eax must be
 = 12345678		      C     _BOCHS1                         EQU 12345678h
 = 87654321		      C     _BOCHS2                         EQU 87654321h
 = 0000			      C     _BOCHS_GET_MONO_MOUSE_XY        EQU 0
 = 0001			      C     _BOCHS_GET_MONO_CURSOR          EQU 1
			      C 
				INCLUDE \exodus\source\common\objects.asp
			      C ; objects.asp
			      C ;
			      C ; Exodus Object Types and Parameters
			      C ;
			      C 
			      C 
			      C 
			      C 
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ BASE OBJECT ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 0000			      C _GROUPING                           EQU 0
 = 0001			      C _DESKTOP                            EQU 1
 = 0002			      C _WINDOW                             EQU 2
 = 0003			      C _CONSOLE                            EQU 3
 = 0004			      C _TEXT_MODE                          EQU 4
 = 0005			      C _MONO_DESKTOP                       EQU 5
 = 0006			      C _MONO_WINDOW                        EQU 6
 = 0007			      C _MONO_CONSOLE                       EQU 7
 = 0008			      C _MONO_TEXT_MODE                     EQU 8
 =-0003			      C _PROPERTY_START                     EQU -3
 =-0002			      C _EVENT_START                        EQU -2
 =-0001			      C _OBJECT_END                         EQU -1
			      C 
 = 0000			      C _OBJECT_RED                         EQU 0
 = 0001			      C _OBJECT_GREEN                       EQU 1
 = 0002			      C _OBJECT_BLUE                        EQU 2
			      C 
			      C ;-----------------------------------------
			      C ; ÚÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ OBJECTS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÙ
 = 0000			      C _INPUT_FIELD                        EQU 0
 = 0001			      C _TEXT_FIELD                         EQU 1
 = 0002			      C _BUTTON                             EQU 2
 = 0003			      C _MENU_BAR                           EQU 3
 = 0004			      C _MENU_POPUP                         EQU 4
 = 0005			      C _RADIO_DIAL                         EQU 5
 = 0006			      C _CHECK_BOX                          EQU 6
 = 0007			      C _CIRCLE_BOX                         EQU 7
 = 0008			      C _PULLDOWN                           EQU 8
 = 0009			      C _SLIDE_BAR                          EQU 9
 = 000A			      C _PERCENT_BAR                        EQU 10
 = 000B			      C _TRAY                               EQU 11
 = 000C			      C _ICON                               EQU 12
 = 000D			      C _BITMAP                             EQU 13
 = 000E			      C _HLINE                              EQU 14
 = 000F			      C _VLINE                              EQU 15
 = 0010			      C _LINE                               EQU 16
 = 0011			      C _OVAL                               EQU 17
 = 0012			      C _RECTANGLE                          EQU 18
 = 0013			      C _SCROLL_BAR_HORIZONTAL              EQU 19
 = 0014			      C _SCROLL_BAR_VERTICAL                EQU 20
 = 0015			      C _CASK                               EQU 21
 = 0016			      C _CFSCA_WINDOW                       EQU 22
 = 0017			      C _NUMBERS_WINDOW                     EQU 23
 = 0018			      C _TYPESET_WINDOW                     EQU 24
 = 0019			      C _BORDER_BOX                         EQU 25
			      C 
			      C ;-----------------------------------------
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ FONT_NAME ID #'S ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ                  ; Note, Refer to INF\VGA.INF for information on this ID # structure
 = 80000806		      C _BITMAP_8x6                         EQU 80000806h
 = 80000808		      C _BITMAP_8x8                         EQU 80000808h
 = 8000080E		      C _BITMAP_8x14                        EQU 8000080eh
 = 80000810		      C _BITMAP_8x16                        EQU 80000810h
 = 80001010		      C _BITMAP_16x16                       EQU 80001010h
			      C 
			      C 
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ _GROUPING PARAMETERS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 			      C _GP_ENABLED                         EQU
 = 			      C _GP_MISC_1                          EQU
 = 			      C _GP_MISC_2                          EQU
 = 			      C _GP_MISC_3                          EQU
 = 			      C _GP_MISC_4                          EQU
 = 			      C _GP_MISC_FLAG_1                     EQU
 = 			      C _GP_MISC_FLAG_2                     EQU
 = 			      C _GP_MISC_FLAG_3                     EQU
			      C 
 = 			      C _GE_FOCUS_GOT                       EQU
 = 			      C _GE_FOCUS_LOST                      EQU
 = 			      C _GE_FOCUS_SET                       EQU
 = 			      C _GE_WHEN_CREATED                    EQU
 = 			      C _GE_WHEN_DESTROYED                  EQU
 = 			      C _GE_REQUESTOR                       EQU
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ _DESKTOP PARAMETERS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 0000			      C _DP_ENABLED                         EQU 0
 = 0001			      C _DP_VISIBLE                         EQU 1
 = 0002			      C _DP_BACKGROUND                      EQU 2
 = 0003			      C _DP_ICON_HORIZONTAL                 EQU 3
 = 0004			      C _DP_ICON_VERTICAL                   EQU 4
 = 0005			      C _DP_MENU_POSITION                   EQU 5
 = 0006			      C _DP_MENU_HEIGHT                     EQU 6
 = 0007			      C _DP_MENU_AUTOHIDE                   EQU 7
 = 0008			      C _DP_MISC_1                          EQU 8
 = 0009			      C _DP_MISC_2                          EQU 9
 = 000A			      C _DP_MISC_3                          EQU 10
 = 000B			      C _DP_MISC_4                          EQU 11
 = 000C			      C _DP_MISC_FLAG_1                     EQU 12
 = 000D			      C _DP_MISC_FLAG_2                     EQU 13
 = 000E			      C _DP_MISC_FLAG_3                     EQU 14
 = 000F			      C _DP_WALLPAPER                       EQU 15
			      C ;
 = 0000			      C _DE_ACTIVATE                        EQU 0
 = 0001			      C _DE_CLICK_BOTH_SINGLE               EQU 1
 = 0002			      C _DE_CLICK_BOTH_DOUBLE               EQU 2
 = 0003			      C _DE_CLICK_LEFT_SINGLE               EQU 3
 = 0004			      C _DE_CLICK_LEFT_DOUBLE               EQU 4
 = 0005			      C _DE_CLICK_LEFT_DOWN                 EQU 5
 = 0006			      C _DE_CLICK_LEFT_UP                   EQU 6
 = 0007			      C _DE_CLICK_RIGHT_SINGLE              EQU 7
 = 0008			      C _DE_CLICK_RIGHT_DOUBLE              EQU 8
 = 0009			      C _DE_CLICK_RIGHT_DOWN                EQU 9
 = 000A			      C _DE_CLICK_RIGHT_UP                  EQU 10
 = 000B			      C _DE_DROPPED_INTO_LEFT               EQU 11
 = 000C			      C _DE_DROPPED_INTO_RIGHT              EQU 12
 = 000D			      C _DE_DRAG_LEFT_START                 EQU 13
 = 000E			      C _DE_DRAG_LEFT_STOP                  EQU 14
 = 000F			      C _DE_DRAG_RIGHT_START                EQU 15
 = 0010			      C _DE_DRAG_RIGHT_STOP                 EQU 16
 = 0011			      C _DE_FOCUS_GOT                       EQU 17
 = 0012			      C _DE_FOCUS_LOST                      EQU 18
 = 0013			      C _DE_FOCUS_SET                       EQU 19
 = 0014			      C _DE_HOVER                           EQU 20
 = 0015			      C _DE_KEYSTROKE                       EQU 21
 = 0016			      C _DE_WHEN_CREATED                    EQU 22
 = 0017			      C _DE_WHEN_DESTROYED                  EQU 23
 = 0018			      C _DE_REQUESTOR                       EQU 24
 = 0019			      C _DE_REFRESH                         EQU 25
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ _WINDOW PARAMETERS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 			      C _WP_ENABLED                         EQU
 = 			      C _WP_VISIBLE                         EQU
 = 			      C _WP_BORDER                          EQU
 = 			      C _WP_COLOR_DISABLEP_BACKGROUND       EQU
 = 			      C _WP_COLOR_DISABLEP_FOREGROUND       EQU
 = 			      C _WP_COLOR_DISABLEP_STYLE            EQU
 = 			      C _WP_COLOR_ENABLEP_BACKGROUND        EQU
 = 			      C _WP_COLOR_ENABLEP_FOREGROUND        EQU
 = 			      C _WP_COLOR_ENABLEP_STYLE             EQU
 = 			      C _WP_COLOR_HEADER_SELECTED_FOREGROUND EQU
 = 			      C _WP_COLOR_HEADER_SELECTED_BACKGROUND EQU
 = 			      C _WP_COLOR_HEADER_DESELECTED_BACKGROUND EQU
 = 			      C _WP_COLOR_HEADER_DESELECTED_FOREGROUND EQU
 = 			      C _WP_FONT_NAME                       EQU
 = 			      C _WP_FONT_SIZE                       EQU
 = 			      C _WP_FONT_TYPEFACE_BOLD              EQU
 = 			      C _WP_FONT_TYPEFACE_DITHER            EQU
 = 			      C _WP_FONT_TYPEFACE_ITALICS           EQU
 = 			      C _WP_FONT_TYPEFACE_REVERSE           EQU
 = 			      C _WP_FONT_TYPEFACE_STRIKETHROUGH     EQU
 = 			      C _WP_FONT_TYPEFACE_UNDERLINE         EQU
 = 			      C _WP_FONT_NAME_ID                    EQU
 = 			      C _WP_MARGIN_LEFT                     EQU
 = 			      C _WP_MARGIN_RIGHT                    EQU
 = 			      C _WP_MARGIN_TOP                      EQU
 = 			      C _WP_MARGIN_BOTTOM                   EQU
 = 			      C _WP_MISC_1                          EQU
 = 			      C _WP_MISC_2                          EQU
 = 			      C _WP_MISC_3                          EQU
 = 			      C _WP_MISC_4                          EQU
 = 			      C _WP_MOUSE_POINTER                   EQU
 = 			      C _WP_POSITION_HEIGHT                 EQU
 = 			      C _WP_POSITION_LEFT                   EQU
 = 			      C _WP_POSITION_TOP                    EQU
 = 			      C _WP_POSITION_WIDTH                  EQU
 = 			      C _WP_MISC_FLAG_1                     EQU
 = 			      C _WP_MISC_FLAG_2                     EQU
 = 			      C _WP_MISC_FLAG_3                     EQU
 = 			      C _WP_SIZEABLE                        EQU
 = 			      C _WP_WRAP_TEXT                       EQU
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ _CONSOLE PARAMETERS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 			      C _CP_ENABLED                         EQU
 = 			      C _CP_VISIBLE                         EQU
 = 			      C _CP_BORDER                          EQU
 = 			      C _CP_COLOR_DISABLEP_BACKGROUND       EQU
 = 			      C _CP_COLOR_DISABLEP_FOREGROUND       EQU
 = 			      C _CP_COLOR_ENABLEP_BACKGROUND        EQU
 = 			      C _CP_COLOR_ENABLEP_FOREGROUND        EQU
 = 			      C _CP_COLOR_HEADER_SELECTED_FOREGROUND EQU
 = 			      C _CP_COLOR_HEADER_SELECTED_BACKGROUND EQU
 = 			      C _CP_COLOR_HEADER_DESELECTED_BACKGROUND EQU
 = 			      C _CP_COLOR_HEADER_DESELECTED_FOREGROUND EQU
 = 			      C _CP_FONT_NAME                       EQU
 = 			      C _CP_FONT_SIZE                       EQU
 = 			      C _CP_FONT_NAME_ID                    EQU
 = 			      C _CP_MISC_1                          EQU
 = 			      C _CP_MISC_2                          EQU
 = 			      C _CP_MISC_3                          EQU
 = 			      C _CP_MISC_4                          EQU
 = 			      C _CP_POSITION_LEFT                   EQU
 = 			      C _CP_POSITION_TOP                    EQU
 = 			      C _CP_WINDOW_HEIGHT                   EQU
 = 			      C _CP_WINDOW_WIDTH                    EQU
 = 			      C _CP_MISC_FLAG_1                     EQU
 = 			      C _CP_MISC_FLAG_2                     EQU
 = 			      C _CP_MISC_FLAG_3                     EQU
 = 			      C _CP_SIZEABLE                        EQU
			      C 
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ _TEXT_MODE PARAMETERS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
 = 			      C _TP_ENABLED                         EQU
 = 			      C _TP_MISC_1                          EQU
 = 			      C _TP_MISC_2                          EQU
 = 			      C _TP_MISC_3                          EQU
 = 			      C _TP_MISC_4                          EQU
 = 			      C _TP_HEIGHT                          EQU
 = 			      C _TP_WIDTH                           EQU
 = 			      C _TP_MISC_FLAG_1                     EQU
 = 			      C _TP_MISC_FLAG_2                     EQU
 = 			      C _TP_MISC_FLAG_3                     EQU
			      C 
			      C 
			      C 
			      C ;-----------------------------------------
			      C ;
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ _HLINE PARAMETERS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
			      C ; Properties
 = 0000			      C _HLP_ENABLED                        EQU 0
 = 0001			      C _HLP_VISIBLE                        EQU 1
 = 0002			      C _HLP_BACKGROUND                     EQU 2
 = 0003			      C _HLP_MISC_1                         EQU 3
 = 0004			      C _HLP_MISC_2                         EQU 4
 = 0005			      C _HLP_MISC_3                         EQU 5
 = 0006			      C _HLP_MISC_4                         EQU 6
 = 0007			      C _HLP_MISC_FLAG_1                    EQU 7
 = 0008			      C _HLP_MISC_FLAG_2                    EQU 8
 = 0009			      C _HLP_MISC_FLAG_3                    EQU 9
			      C ; Events
 = 0000			      C _HLE_ACTIVATE                       EQU 0
 = 0001			      C _HLE_CLICK_BOTH_SINGLE              EQU 1
 = 0002			      C _HLE_CLICK_BOTH_DOUBLE              EQU 2
 = 0003			      C _HLE_CLICK_LEFT_SINGLE              EQU 3
 = 0004			      C _HLE_CLICK_LEFT_DOUBLE              EQU 4
 = 0005			      C _HLE_CLICK_LEFT_DOWN                EQU 5
 = 0006			      C _HLE_CLICK_LEFT_UP                  EQU 6
 = 0007			      C _HLE_CLICK_RIGHT_SINGLE             EQU 7
 = 0008			      C _HLE_CLICK_RIGHT_DOUBLE             EQU 8
 = 0009			      C _HLE_CLICK_RIGHT_DOWN               EQU 9
 = 000A			      C _HLE_CLICK_RIGHT_UP                 EQU 10
 = 000B			      C _HLE_DROPPED_INTO_LEFT              EQU 11
 = 000C			      C _HLE_DROPPED_INTO_RIGHT             EQU 12
 = 000D			      C _HLE_DRAG_LEFT_START                EQU 13
 = 000E			      C _HLE_DRAG_LEFT_STOP                 EQU 14
 = 000F			      C _HLE_DRAG_RIGHT_START               EQU 15
 = 0010			      C _HLE_DRAG_RIGHT_STOP                EQU 16
 = 0011			      C _HLE_FOCUS_GOT                      EQU 17
 = 0012			      C _HLE_FOCUS_LOST                     EQU 18
 = 0013			      C _HLE_FOCUS_SET                      EQU 19
 = 0014			      C _HLE_HOVER                          EQU 20
 = 0015			      C _HLE_KEYSTROKE                      EQU 21
 = 0016			      C _HLE_WHEN_CREATED                   EQU 22
 = 0017			      C _HLE_WHEN_DESTROYED                 EQU 23
 = 0018			      C _HLE_REQUESTOR                      EQU 24
 = 0019			      C _HLE_REFRESH                        EQU 25
			      C 
			      C 
			      C ;-----------------------------------------
			      C ;
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ _RECTANGLE PARAMETERS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
			      C ; Properties
 = 0000			      C _RP_ENABLED                         EQU 0
 = 0001			      C _RP_VISIBLE                         EQU 1
 = 0002			      C _RP_BACKGROUND                      EQU 2
 = 0003			      C _RP_MISC_1                          EQU 3
 = 0004			      C _RP_MISC_2                          EQU 4
 = 0005			      C _RP_MISC_3                          EQU 5
 = 0006			      C _RP_MISC_4                          EQU 6
 = 0007			      C _RP_MISC_FLAG_1                     EQU 7
 = 0008			      C _RP_MISC_FLAG_2                     EQU 8
 = 0009			      C _RP_MISC_FLAG_3                     EQU 9
			      C ; Events
 = 0000			      C _RE_ACTIVATE                        EQU 0
 = 0001			      C _RE_CLICK_BOTH_SINGLE               EQU 1
 = 0002			      C _RE_CLICK_BOTH_DOUBLE               EQU 2
 = 0003			      C _RE_CLICK_LEFT_SINGLE               EQU 3
 = 0004			      C _RE_CLICK_LEFT_DOUBLE               EQU 4
 = 0005			      C _RE_CLICK_LEFT_DOWN                 EQU 5
 = 0006			      C _RE_CLICK_LEFT_UP                   EQU 6
 = 0007			      C _RE_CLICK_RIGHT_SINGLE              EQU 7
 = 0008			      C _RE_CLICK_RIGHT_DOUBLE              EQU 8
 = 0009			      C _RE_CLICK_RIGHT_DOWN                EQU 9
 = 000A			      C _RE_CLICK_RIGHT_UP                  EQU 10
 = 000B			      C _RE_DROPPED_INTO_LEFT               EQU 11
 = 000C			      C _RE_DROPPED_INTO_RIGHT              EQU 12
 = 000D			      C _RE_DRAG_LEFT_START                 EQU 13
 = 000E			      C _RE_DRAG_LEFT_STOP                  EQU 14
 = 000F			      C _RE_DRAG_RIGHT_START                EQU 15
 = 0010			      C _RE_DRAG_RIGHT_STOP                 EQU 16
 = 0011			      C _RE_FOCUS_GOT                       EQU 17
 = 0012			      C _RE_FOCUS_LOST                      EQU 18
 = 0013			      C _RE_FOCUS_SET                       EQU 19
 = 0014			      C _RE_HOVER                           EQU 20
 = 0015			      C _RE_KEYSTROKE                       EQU 21
 = 0016			      C _RE_WHEN_CREATED                    EQU 22
 = 0017			      C _RE_WHEN_DESTROYED                  EQU 23
 = 0018			      C _RE_REQUESTOR                       EQU 24
 = 0019			      C _RE_REFRESH                         EQU 25
			      C 
			      C 
			      C ;-----------------------------------------
			      C ;
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ _BORDER_BOX PARAMETERS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
			      C ; Properties
 = 0000			      C _BBP_ENABLED                        EQU 0
 = 0001			      C _BBP_VISIBLE                        EQU 1
 = 0002			      C _BBP_BACKGROUND                     EQU 2
 = 0003			      C _BBP_LIGHT_BORDER                   EQU 3
 = 0004			      C _BBP_SHADOW_BORDER                  EQU 4
 = 0005			      C _BBP_MISC_1                         EQU 5
 = 0006			      C _BBP_MISC_2                         EQU 6
 = 0007			      C _BBP_MISC_3                         EQU 7
 = 0008			      C _BBP_MISC_4                         EQU 8
 = 0009			      C _BBP_MISC_FLAG_1                    EQU 9
 = 000A			      C _BBP_MISC_FLAG_2                    EQU 10
 = 000B			      C _BBP_MISC_FLAG_3                    EQU 11
			      C ; Events
 = 0000			      C _BBE_ACTIVATE                       EQU 0
 = 0001			      C _BBE_CLICK_BOTH_SINGLE              EQU 1
 = 0002			      C _BBE_CLICK_BOTH_DOUBLE              EQU 2
 = 0003			      C _BBE_CLICK_LEFT_SINGLE              EQU 3
 = 0004			      C _BBE_CLICK_LEFT_DOUBLE              EQU 4
 = 0005			      C _BBE_CLICK_LEFT_DOWN                EQU 5
 = 0006			      C _BBE_CLICK_LEFT_UP                  EQU 6
 = 0007			      C _BBE_CLICK_RIGHT_SINGLE             EQU 7
 = 0008			      C _BBE_CLICK_RIGHT_DOUBLE             EQU 8
 = 0009			      C _BBE_CLICK_RIGHT_DOWN               EQU 9
 = 000A			      C _BBE_CLICK_RIGHT_UP                 EQU 10
 = 000B			      C _BBE_DROPPED_INTO_LEFT              EQU 11
 = 000C			      C _BBE_DROPPED_INTO_RIGHT             EQU 12
 = 000D			      C _BBE_DRAG_LEFT_START                EQU 13
 = 000E			      C _BBE_DRAG_LEFT_STOP                 EQU 14
 = 000F			      C _BBE_DRAG_RIGHT_START               EQU 15
 = 0010			      C _BBE_DRAG_RIGHT_STOP                EQU 16
 = 0011			      C _BBE_FOCUS_GOT                      EQU 17
 = 0012			      C _BBE_FOCUS_LOST                     EQU 18
 = 0013			      C _BBE_FOCUS_SET                      EQU 19
 = 0014			      C _BBE_HOVER                          EQU 20
 = 0015			      C _BBE_KEYSTROKE                      EQU 21
 = 0016			      C _BBE_WHEN_CREATED                   EQU 22
 = 0017			      C _BBE_WHEN_DESTROYED                 EQU 23
 = 0018			      C _BBE_REQUESTOR                      EQU 24
 = 0019			      C _BBE_REFRESH                        EQU 25
			      C 
			      C 
			      C ;-----------------------------------------
			      C ;
			      C ; ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
			      C ; ³ _TEXT_FIELD PARAMETERS ³
			      C ; ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
			      C ; Properties
 = 0000			      C _TFP_ENABLED                        EQU 0
 = 0001			      C _TFP_VISIBLE                        EQU 1
 = 0002			      C _TFP_BORDER                         EQU 2
 = 0003			      C _TFP_ALIGNMENT                      EQU 3
 = 0004			      C _TFP_AUTO_SIZE                      EQU 4
 = 0005			      C _TFP_COLOR_BACKGROUND               EQU 5
 = 0006			      C _TFP_COLOR_FOREGROUND               EQU 6
 = 0007			      C _TFP_COLOR_SELECTED_BACKGROUND      EQU 7
 = 0008			      C _TFP_COLOR_SELECTED_FOREGROUND      EQU 8
 = 0009			      C _TFP_SOURCE_PTR                     EQU 9
 = 000A			      C _TFP_FONT_NAME                      EQU 10
 = 000B			      C _TFP_FONT_SIZE                      EQU 11
 = 000C			      C _TFP_FONT_TYPEFACE_BOLD             EQU 12
 = 000D			      C _TFP_FONT_TYPEFACE_DITHER           EQU 13
 = 000E			      C _TFP_FONT_TYPEFACE_ITALICS          EQU 14
 = 000F			      C _TFP_FONT_TYPEFACE_REVERSE          EQU 15
 = 0010			      C _TFP_FONT_TYPEFACE_STRIKETHROUGH    EQU 16
 = 0011			      C _TFP_FONT_TYPEFACE_UNDERLINE        EQU 17
 = 0012			      C _TFP_FONT_NAME_ID                   EQU 18
 = 0013			      C _TFP_MARGIN_LEFT                    EQU 19
 = 0014			      C _TFP_MARGIN_TOP                     EQU 20
 = 0015			      C _TFP_SELECTED_TEXT_START            EQU 21
 = 0016			      C _TFP_SELECTED_TEXT_END              EQU 22
 = 0017			      C _TFP_MISC_1                         EQU 23
 = 0018			      C _TFP_MISC_2                         EQU 24
 = 0019			      C _TFP_MISC_3                         EQU 25
 = 001A			      C _TFP_MISC_4                         EQU 26
 = 001B			      C _TFP_MISC_FLAG_1                    EQU 27
 = 001C			      C _TFP_MISC_FLAG_2                    EQU 28
 = 001D			      C _TFP_MISC_FLAG_3                    EQU 29
			      C ; Events
 = 0000			      C _TFE_ACTIVATE                       EQU 0
 = 0001			      C _TFE_CLICK_BOTH_SINGLE              EQU 1
 = 0002			      C _TFE_CLICK_BOTH_DOUBLE              EQU 2
 = 0003			      C _TFE_CLICK_LEFT_SINGLE              EQU 3
 = 0004			      C _TFE_CLICK_LEFT_DOUBLE              EQU 4
 = 0005			      C _TFE_CLICK_LEFT_DOWN                EQU 5
 = 0006			      C _TFE_CLICK_LEFT_UP                  EQU 6
 = 0007			      C _TFE_CLICK_RIGHT_SINGLE             EQU 7
 = 0008			      C _TFE_CLICK_RIGHT_DOUBLE             EQU 8
 = 0009			      C _TFE_CLICK_RIGHT_DOWN               EQU 9
 = 000A			      C _TFE_CLICK_RIGHT_UP                 EQU 10
 = 000B			      C _TFE_DROPPED_INTO_LEFT              EQU 11
 = 000C			      C _TFE_DROPPED_INTO_RIGHT             EQU 12
 = 000D			      C _TFE_DRAG_LEFT_START                EQU 13
 = 000E			      C _TFE_DRAG_LEFT_STOP                 EQU 14
 = 000F			      C _TFE_DRAG_RIGHT_START               EQU 15
 = 0010			      C _TFE_DRAG_RIGHT_STOP                EQU 16
 = 0011			      C _TFE_FOCUS_GOT                      EQU 17
 = 0012			      C _TFE_FOCUS_LOST                     EQU 18
 = 0013			      C _TFE_FOCUS_SET                      EQU 19
 = 0014			      C _TFE_HOVER                          EQU 20
 = 0015			      C _TFE_KEYSTROKE                      EQU 21
 = 0016			      C _TFE_WHEN_CREATED                   EQU 22
 = 0017			      C _TFE_WHEN_DESTROYED                 EQU 23
 = 0018			      C _TFE_REQUESTOR                      EQU 24
 = 0019			      C _TFE_REFRESH                        EQU 25
			      C 
				INCLUDE ex_eq.asp
			      C ; ex_eq.asp
			      C ;
			      C ; Exodus constants
			      C ;
			      C 
			      C 
			      C 
 = 0000			      C _CREATE             EQU 0
 = 0001			      C _PROPERTY           EQU 1
 = 0002			      C _EVENT              EQU 2
			      C 

				    .386P
 00000000			_TEXT32 SEGMENT BYTE 'CODE' USE32
				    ASSUME NOTHING
				; These are required to be the first 2 dwords in the file
 00000000  00000008 R		dd  offset main
 00000004  00000019 R		dd  offset requestor




 00000008			    main    PROC
				    ; This routine is called once by Exodus once initialization is complete (all calls to requestor() are finished)
				    ; It is used by Exodus to allow this driver to properly initialize itself.
				    ; When this function is called multi-tasking is not installed.  This is a linear function.
				    ;
				    ; Upon entry:   Nothing
				    ;
				    ; Upon exit:    A "continued status of execution" is expected by Exodus.  This indicates whether or not everything
				    ;               initialized ok or is available.  If everything is OK the carry? flag is CLEAR.  If there is an error
				    ;               and this driver cannot continue then the carry? should be SET.
				    ;               carry? - CLEAR=Ok to continue
				    ;                          SET=Error initializing
				    ;
 00000008  66| 2E: 8E 1D	        mov     ds,cs:data_segment
	   0000031A R
 00000010  C6 05 0000030A R	        mov     ds:bootup,0
	   00
 00000017  F8			        clc
 00000018  CB			        retf
 00000019			    main    ENDP




 00000019			    requestor   PROC
				    ; This routine is called by Exodus.  When this function is called multi-tasking is not installed.  This is a linear function.
				    ;
				    ; Upon entry:   eax - requested function
				    ;                ds - temporary ORG 0h data segment for use with these requestor() functions
				    ;
				    ; Upon exit:    results vary based on value of eax
				    ;
				        .IF (eax == 'info')
 00000019  3D 696E666F	   *	    cmp    eax, 'info'
 0000001E  75 26	   *	    jne    @C0001
				          ; Program information
 00000020  B8 6E617469		            mov     eax,'nati'                              ; Identifying this program as a native primative
 00000025  B9 000003E2 R	            mov     ecx,offset end_of_required_data         ; The maximum number of bytes to retain after loading

 0000002A  BE 000003E2 R	            mov     esi,offset driver_primatives            ; Offset to the native primatives structure
 0000002F  BF 000002B3 R	            mov     edi,offset driver_name
 00000034  BB 000002CB R	            mov     ebx,offset version
 00000039  BA 000002DB R	            mov     edx,offset copyright
 0000003E  BD 000002FB R	            mov     ebp,offset author
 00000043  F8			            clc
				        .ELSEIF (eax == 'prim')
 00000044  EB 51	   *	    jmp    @C0003
 00000046		   *@C0001:
 00000046  3D 7072696D	   *	    cmp    eax, 'prim'
 0000004B  75 14	   *	    jne    @C0004
				          ; Native primatives this program will use
 0000004D  66| 8C 1D		            mov     ds:data_segment,ds
	   0000031A R
 00000054  BE 00000332 R	            mov     esi,offset required_primatives          ; This primative requires these external influence
 00000059  BF 0000031E R	            mov     edi,offset primative_call_gates
 0000005E  F8			            clc
				        .ELSEIF (eax == 'id  ')
 0000005F  EB 36	   *	    jmp    @C0006
 00000061		   *@C0004:
 00000061  3D 69642020	   *	    cmp    eax, 'id  '
 00000066  75 0F	   *	    jne    @C0007
				          ; Display this program's ID on the VGA monitor
 00000068  BE 000002B3 R	            mov     esi,offset driver_name
 0000006D  2E: FF 1D		            call    fword ptr cs:_VID_display_string_nr_vga
	   00000320 R
 00000074  F8			            clc
				        .ELSEIF (eax == 'note')
 00000075  EB 20	   *	    jmp    @C0009
 00000077		   *@C0007:
 00000077  3D 6E6F7465	   *	    cmp    eax, 'note'
 0000007C  75 18	   *	    jne    @C000A
				          ; Exodus has a note for us
 0000007E  B8 73746F70		            mov     eax,'stop'
 00000083  BB 6C6F6164		            mov     ebx,'load'
 00000088  BE 000002B3 R	            mov     esi,offset driver_name
 0000008D  2E: FF 1D		            call    fword ptr cs:_EXODUS_requestor
	   0000031C R
				        .ELSE
 00000094  EB 01	   *	    jmp    @C000C
 00000096		   *@C000A:
 00000096  F9			            stc
				        .ENDIF
 00000097		   *@C000C:
 00000097		   *@C0009:
 00000097		   *@C0006:
 00000097		   *@C0003:
 00000097  CB			        retf
 00000098			    requestor   ENDP



 00000098			    EXODUS_dot_com      PROC
				    ; This routine is the first program called after the initial bootup is completed
				      ;; Indicate system status
 00000098  66| 2E: 8E 1D	        mov     ds,cs:data_segment
	   0000031A R
 000000A0  C7 05 00000312 R	        mov     ds:booting_up,1
	   00000001
 000000AA  C7 05 00000316 R	        mov     ds:shutdown,0
	   00000000

				      ;; Clear the VGA screen
 000000B4  6A 00		        push    0                                                   ; upper-left
 000000B6  6A 00		        push    0                                                   ; lower-right
 000000B8  B8 000000A8		        mov     eax,_sSYSTEM
 000000BD  8E D8		        mov     ds,eax
 000000BF  67& 0F B7 06		        movzx   eax,word ptr ds:[_SYSTEM_VGA_HORIZONTAL]            ; width
	   0020
 000000C5  67& 0F B7 1E		        movzx   ebx,word ptr ds:[_SYSTEM_VGA_VERTICAL]              ; height
	   0022
 000000CB  66| 2E: 8E 1D	        mov     ds,cs:data_segment
	   0000031A R
 000000D3  A3 000001FF R	        mov     ds:desktop_width,eax
 000000D8  89 1D 00000203 R	        mov     ds:desktop_height,ebx
 000000DE  50			        push    eax
 000000DF  53			        push    ebx
 000000E0  6A 00		        push    0                                                   ; color
 000000E2  FF 1D 00000322 R	        call    fword ptr ds:_VID_g_fill_rectangle

				      ;; Create the main window
 000000E8  E8 0000003B		        call    invEXODUS_create_desktop

				      ;; Set focus on the main Exodus program
 000000ED  66| B8 0001		        mov     ax,1                                                ; This task's handle
 000000F1  FF 1D 0000031E R	        call    fword ptr ds:_TASK_set_focus


				;        call    fword ptr ds:_VID_test_routine

				;;
				;;
				;; Wait for events!
				;;
				;;
				;; Note, this bit of code does two things.
				;;
				;;   #1 it sets up Exodus to wait for events so the system can act on them when they occur
				;;   #2 it receives control from the tasking system when it is is in an idle state an no tasks are using idle cpu time
				;;      When #2 occurs this task simply waits for an interrupt and then returns
				;;
 000000F7  66| 2E: 8E 1D	        mov     ds,cs:data_segment
	   0000031A R
 000000FF  C7 05 00000312 R	        mov     ds:booting_up,0
	   00000000
 00000109  FF 1D 0000032A R	        call    fword ptr ds:_TASK_read_events
				        .WHILE (cs:shutdown != 10101010b)
 0000010F  EB 07	   *	    jmp    @C000D
 00000111		   *@C000E:
 00000111  2E: FF 1D		            call    fword ptr cs:_Exodus_TASK_release_timeslice
	   0000032C R
				        .ENDW
 00000118		   *@C000D:
 00000118  2E: 81 3D
	   00000316 R
	   000000AA	   *	    cmp    cs : shutdown, 0AAh
 00000123  75 EC	   *	    jne    @C000E

				;;
				;; When control reaches this point we're shutting down Exodus
				;;
 00000125			      @@:
				;int 3
 00000125  F4			        hlt
 00000126  EB FD		        jmp @B
 00000128			    EXODUS_dot_com      ENDP




 00000128			    invEXODUS_create_desktop        PROC
				    ; This routine creates the main desktop window based on the current screen resolution
				    ;
				    ; Upon entry:   Nothing
				    ;
				    ; Upon exit:    The VGA screen is displayed with the standard Exodus Screen
				    ;
 00000128  50			        push    eax
 00000129  56			        push    esi

				      ;; Set some required variables based on the current video mode
				      ; Exodus bar rectangle records
 0000012A  8B 15 00000203 R	        mov     edx,ds:desktop_height
 00000130  83 EA 1D		        sub     edx,29
 00000133  89 15 00000219 R	        mov     ds:ebr_top,edx
 00000139  8B 0D 000001FF R	        mov     ecx,ds:desktop_width
 0000013F  89 0D 00000221 R	        mov     ds:ebr_width,ecx
				      ; Exodus bar line
 00000145  8B 15 00000203 R	        mov     edx,ds:desktop_height
 0000014B  83 EA 1E		        sub     edx,30
 0000014E  89 15 00000234 R	        mov     ds:ebl_top,edx
 00000154  8B 0D 000001FF R	        mov     ecx,ds:desktop_width
 0000015A  89 0D 0000023C R	        mov     ds:ebl_width,ecx
				      ; The Exodus button
 00000160  8B 15 00000203 R	        mov     edx,ds:desktop_height
 00000166  83 EA 1B		        sub     edx,27
 00000169  89 15 0000024B R	        mov     ds:ebb_top,edx
				      ; The "Exodus" text on the button
 0000016F  8B 15 00000203 R	        mov     edx,ds:desktop_height
 00000175  83 EA 16		        sub     edx,22
 00000178  89 15 0000026E R	        mov     ds:ebt_top,edx
 0000017E  66| 8C 1D		        mov     ds:ebt_segment,ds
	   00000290 R
				      ; The Exodus button rectangle (where the spinning logo will be displayed)
 00000185  8B 15 00000203 R	        mov     edx,ds:desktop_height
 0000018B  83 EA 19		        sub     edx,25
 0000018E  89 15 00000299 R	        mov     ds:eblr_top,edx

				      ;; Create the desktop
 00000194  B8 00000001		        mov     eax,1                                               ; This task's handle
 00000199  BE 000001F6 R	        mov     esi,offset exodus_desktop
 0000019E  FF 1D 00000324 R	        call    fword ptr ds:_OBJECT_create_base_object

				      ;; Add items to the desktop
 000001A4  33 DB		        xor     ebx,ebx
 000001A6  BE 00000218 R	        mov     esi,offset exodus_bar_rectangle                     ; Rectangle beneath the Exodus button
 000001AB  FF 1D 00000326 R	        call    fword ptr ds:_OBJECT_create_object

 000001B1  BE 00000233 R	        mov     esi,offset exodus_bar_line                          ; Line above the rectangle
 000001B6  FF 1D 00000326 R	        call    fword ptr ds:_OBJECT_create_object

 000001BC  BE 0000024A R	        mov     esi,offset exodus_button_border                     ; Box around the Exodus button
 000001C1  FF 1D 00000326 R	        call    fword ptr ds:_OBJECT_create_object

 000001C7  BE 0000026D R	        mov     esi,offset exodus_button_text                       ; The "Exodus" text
 000001CC  FF 1D 00000326 R	        call    fword ptr ds:_OBJECT_create_object

 000001D2  BE 00000298 R	        mov     esi,offset exodus_button_logo_rectangle             ; The Exodus button logo rectangle
 000001D7  FF 1D 00000326 R	        call    fword ptr ds:_OBJECT_create_object

 000001DD  5E			        pop     esi
 000001DE  58			        pop     eax
 000001DF  C3			        ret
 000001E0			    invEXODUS_create_desktop        ENDP




 000001E0			    invEXODUS_write_screen      PROC
 000001E0  60			        pushad
 000001E1  06			        push    es
 000001E2  66| B8 0030		        mov     ax,_sMONO
 000001E6  66| 8E C0		        mov     es,ax
				        .REPEAT
 000001E9		   *@C0010:
 000001E9  2E: 8A 06		            mov     al,byte ptr cs:[esi]
 000001EC  46			            inc     esi
 000001ED  AA			            stosb
 000001EE  B0 07		            mov     al,7
 000001F0  AA			            stosb
				        .UNTILCXZ
 000001F1  E2 F6	   *	    loop   @C0010
 000001F3  07			        pop     es
 000001F4  61			        popad
 000001F5  C3			        ret
 000001F6			    invEXODUS_write_screen      ENDP







				; DATA relating to Exodus objects
				    INCLUDE ex_data.asp
			      C ; ex_data.asp
			      C ;
			      C ; Exodus.com DATA items
			      C ;
			      C 
			      C 
			      C ; The desktop dimension itself is explicitly laid out so it can be modified during bootup
 000001F6		      C exodus_desktop:
 000001F6  01		      C         db  _DESKTOP
 000001F7 00000000	      C     desktop_top     dd  0
 000001FB 00000000	      C     desktop_left    dd  0
 000001FF 00000000	      C     desktop_width   dd  0
 00000203 00000000	      C     desktop_height  dd  0
 00000207  00 01	      C         db  _DP_ENABLED, 1                                          ; 1-yes, 0-no
 00000209  01 01	      C         db  _DP_VISIBLE, 1
 0000020B  02 00 00 80	      C         db  _DP_BACKGROUND, 0,0,128                                 ; RGB, R=0, G=0, B=40 (out of 255)
 0000020F  05 06	      C         db  _DP_MENU_POSITION, 6                                    ; In the form of a clock; 12=top, 3=right, 6=bottom, 9=left
 00000211  06		      C         db  _DP_MENU_HEIGHT
 00000212  001E		      C         dw   30                                                     ; 30 pixels (this is for the system tray
 00000214  07 00	      C         db  _DP_MENU_AUTOHIDE, 0
 00000216  FFFF		      C         dw  _OBJECT_END
			      C 
			      C 
 00000218		      C     exodus_bar_rectangle:
 00000218  12		      C         db  _RECTANGLE
 00000219 00000000	      C     ebr_top             dd  0
 0000021D 00000000	      C     ebr_left            dd  0
 00000221 00000000	      C     ebr_width           dd  0
 00000225 0000001D	      C     ebr_height          dd  29
 00000229  02 00 FF FF	      C         db  _RP_BACKGROUND, 0, 255, 255                             ; bright cyan
 0000022D  00 01	      C         db  _RP_ENABLED, 1
 0000022F  01 01	      C         db  _RP_VISIBLE, 1
 00000231  FFFF		      C         dw  _OBJECT_END
			      C 
			      C 
 00000233		      C     exodus_bar_line:
 00000233  0E		      C         db  _HLINE
 00000234 00000000	      C     ebl_top             dd  0
 00000238 00000000	      C     ebl_left            dd  0
 0000023C 00000000	      C     ebl_width           dd  0
 00000240  02 00 00 FF	      C         db  _HLP_BACKGROUND, 0, 0, 255                              ; bright blue
 00000244  00 01	      C         db  _HLP_ENABLED, 1
 00000246  01 01	      C         db  _HLP_VISIBLE, 1
 00000248  FFFF		      C         dw  _OBJECT_END
			      C 
			      C 
 0000024A		      C     exodus_button_border:
 0000024A  19		      C         db  _BORDER_BOX
 0000024B 00000000	      C     ebb_top             dd  0
 0000024F 00000001	      C     ebb_left            dd  1
 00000253 0000007D	      C     ebb_width           dd  125
 00000257 00000019	      C     ebb_height          dd  25
 0000025B  02 00 E1 E1	      C         db  _BBP_BACKGROUND, 0, 225, 225                            ; bright cyan
 0000025F  03 FF FF FF	      C         db  _BBP_LIGHT_BORDER, 255, 255, 255                        ; bright white
 00000263  04 80 80 80	      C         db  _BBP_SHADOW_BORDER, 128, 128, 128                       ; grey
 00000267  00 01	      C         db  _BBP_ENABLED, 1
 00000269  01 01	      C         db  _BBP_VISIBLE, 1
 0000026B  FFFF		      C         dw  _OBJECT_END
			      C 
			      C 
 0000026D		      C     exodus_button_text:
 0000026D  01		      C         db  _TEXT_FIELD
 0000026E 00000000	      C     ebt_top             dd  0
 00000272 0000001C	      C     ebt_left            dd  28
 00000276 00000060	      C     ebt_width           dd  6*16
 0000027A 00000010	      C     ebt_height          dd  16
 0000027E  05 00 E1 E1	      C         db  _TFP_COLOR_BACKGROUND, 0, 225, 225                      ; bright cyan
 00000282  06 00 00 80	      C         db  _TFP_COLOR_FOREGROUND, 0, 0, 128                        ; dark blue
 00000286  12		      C         db  _TFP_FONT_NAME_ID
 00000287  80001010	      C         dd      _BITMAP_16x16                                       ; Bitmap 16x16 font
 0000028B  00 00	      C         db  _TFP_ENABLED, 0
 0000028D  01 01	      C         db  _TFP_VISIBLE, 1
 0000028F  09		      C         db  _TFP_SOURCE_PTR
 00000290 FFFF		      C     ebt_segment         dw  -1
 00000292  0000030B R	      C         dd  offset exodus_button
 00000296  FFFF		      C         dw  _OBJECT_END
			      C 
			      C 
 00000298		      C     exodus_button_logo_rectangle:
 00000298  12		      C         db  _RECTANGLE
 00000299 00000000	      C     eblr_top            dd  0
 0000029D 00000003	      C     eblr_left           dd  3
 000002A1 00000018	      C     eblr_width          dd  24
 000002A5 00000016	      C     eblr_height         dd  22
 000002A9  02 00 00 00	      C         db  _RP_BACKGROUND, 0, 0, 0                                 ; black
 000002AD  00 01	      C         db  _RP_ENABLED, 1
 000002AF  01 01	      C         db  _RP_VISIBLE, 1
 000002B1  FFFF		      C         dw  _OBJECT_END
			      C 


				; DATA
 000002B3 45 78 6F 64 75	    driver_name                             db  "Exodus Operating System",0
	   73 20 4F 70 65
	   72 61 74 69 6E
	   67 20 53 79 73
	   74 65 6D 00
 000002CB 31 30 2E 31 30	    version                                 db  "10.10.2010 BETA",0
	   2E 32 30 31 30
	   20 42 45 54 41
	   00
 000002DB 28 63 29 20 43	    copyright                               db  "(c) Copyright Beatleworks, Inc.",0
	   6F 70 79 72 69
	   67 68 74 20 42
	   65 61 74 6C 65
	   77 6F 72 6B 73
	   2C 20 49 6E 63
	   2E 00
 000002FB 52 69 63 6B 20	    author                                  db  "Rick C. Hodgin",0
	   43 2E 20 48 6F
	   64 67 69 6E 00
 0000030A 01			    bootup                                  db  1                   ; Changed to 0 after initial bootup is complete

 0000030B 45 78 6F 64 75	    exodus_button                           db  "Exodus",0
	   73 00

 00000312 00000001		    booting_up                              dd  1                   ; Changed to 0 after Exodus.com has fully initialized itself
 00000316 00000000		    shutdown                                dd  0
 0000031A 0000			    data_segment                            dw  0


 0000031C 0000			    _EXODUS_requestor                       dw  0
 0000031E			  primative_call_gates:
 0000031E 0000			    _TASK_set_focus                         dw  0
 00000320 00B0			    _VID_display_string_nr_vga              dw  _sEXODUS_REQUESTOR
 00000322 F000			    _VID_g_fill_rectangle                   dw  0f000h
 00000324 F000			    _OBJECT_create_base_object              dw  0f000h
 00000326 F000			    _OBJECT_create_object                   dw  0f000h
 00000328 F000			    _VID_g_derive_color                     dw  0f000h
 0000032A F000			    _TASK_read_events                       dw  0f000h
 0000032C F000			    _Exodus_TASK_release_timeslice          dw  0f000h
 0000032E  F000			                                            dw  0f000h
 00000330  F000			                                            dw  0f000h

 00000332 0E 54 41 53 4B	    required_primatives                     db  14, "TASK_set_focus"
	   5F 73 65 74 5F
	   66 6F 63 75 73
 00000341  19 56 49 44 5F	                                            db  25, "VID_display_string_nr_vga"
	   64 69 73 70 6C
	   61 79 5F 73 74
	   72 69 6E 67 5F
	   6E 72 5F 76 67
	   61
 0000035B  14 56 49 44 5F	                                            db  20, "VID_g_fill_rectangle"
	   67 5F 66 69 6C
	   6C 5F 72 65 63
	   74 61 6E 67 6C
	   65
 00000370  19 4F 42 4A 45	                                            db  25, "OBJECT_create_base_object"
	   43 54 5F 63 72
	   65 61 74 65 5F
	   62 61 73 65 5F
	   6F 62 6A 65 63
	   74
 0000038A  14 4F 42 4A 45	                                            db  20, "OBJECT_create_object"
	   43 54 5F 63 72
	   65 61 74 65 5F
	   6F 62 6A 65 63
	   74
 0000039F  12 56 49 44 5F	                                            db  18, "VID_g_derive_color"
	   67 5F 64 65 72
	   69 76 65 5F 63
	   6F 6C 6F 72
 000003B2  10 54 41 53 4B	                                            db  16, "TASK_read_events"
	   5F 72 65 61 64
	   5F 65 76 65 6E
	   74 73
 000003C3  1D 45 78 6F 64	                                            db  29, "Exodus_TASK_release_timeslice"
	   75 73 5F 54 41
	   53 4B 5F 72 65
	   6C 65 61 73 65
	   5F 74 69 6D 65
	   73 6C 69 63 65
 000003E1  FF			                                            db  0ffh

 000003E2			 end_of_required_data:
 000003E2			    driver_primatives:
 000003E2  0E 45 58 4F 44	                                            db  14, "EXODUS_dot_com"
	   55 53 5F 64 6F
	   74 5F 63 6F 6D
 000003F1  00000098 R		                                            dd  offset EXODUS_dot_com
 000003F5  0000			                                            dw  0

 000003F7  FFFF			                                            dw  0ffffh              ; Teriminator

 03F9				_TEXT32 ENDS

				END
